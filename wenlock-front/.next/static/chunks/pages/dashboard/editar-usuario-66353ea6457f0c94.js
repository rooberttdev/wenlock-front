(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[408],{6474:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/editar-usuario",function(){return a(6922)}])},469:function(e,s,a){"use strict";a.d(s,{Mi:function(){return o},Nq:function(){return l},a$:function(){return r},h8:function(){return i},uh:function(){return n}});let t="https://wenlock-back.onrender.com",r=async e=>{let s=await fetch("".concat(t,"/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("Erro ao cadastrar usu\xe1rio");return await s.json()},o=async e=>{let s=await fetch("".concat(t,"/users/").concat(e));if(!s.ok)throw Error("Erro ao buscar usu\xe1rio");return await s.json()},l=async(e,s)=>{let a=await fetch("".concat(t,"/users/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok)throw Error("Erro ao atualizar usu\xe1rio");return await a.json()},n=async()=>{try{let e=await fetch("".concat(t,"/users")),s=await e.json();return Array.isArray(s)?s:[]}catch(e){return console.error("Erro ao buscar usu\xe1rios:",e),[]}},i=async e=>{try{if(!(await fetch("".concat(t,"/users/").concat(e),{method:"DELETE"})).ok)throw Error("Erro ao deletar o usu\xe1rio")}catch(e){throw console.error("Erro ao deletar o usu\xe1rio:",e),e}}},6092:function(e,s,a){"use strict";var t=a(5893),r=a(7294),o=a(1664),l=a.n(o),n=a(1163);s.Z=e=>{let s,a,o,i,{children:c}=e,[d,u]=(0,r.useState)("Usu\xe1rio"),[m,h]=(0,r.useState)("usuario@email.com"),[x,b]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),v=(0,n.useRouter)();return(0,r.useEffect)(()=>{{let e=localStorage.getItem("userName")||"Milena Santana Borges",s=localStorage.getItem("userEmail")||"milena.santana@empresa.com.br";u(e),h(s)}},[]),(0,t.jsxs)("div",{className:"relative flex min-h-screen overflow-hidden",children:[(0,t.jsxs)("aside",{className:"".concat(g?"w-20":"w-64"," bg-terceiro opacity-100 min-h-screen flex flex-col justify-between transition-all duration-300 shadow-custom"),children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,t.jsx)("img",{src:g?"/logo-small.png":"/logo2.png",alt:"Logo",className:"transition-all duration-300 ".concat(g?"w-8 h-8":"max-w-48 h-auto")}),(0,t.jsx)("button",{onClick:()=>{p(!g),w(!1)},className:"focus:outline-none",children:(0,t.jsx)("img",{src:g?"/icone-menu-direita.png":"/icone-menu-esquerda.png",alt:"Toggle Sidebar",className:"h-6 w-6"})})]}),(0,t.jsxs)("nav",{className:"mt-10",children:[(0,t.jsxs)(l(),{href:"/dashboard",className:"flex items-center p-4 ".concat((s="/dashboard",v.pathname===s)?"bg-[#00AAC1] text-black":"hover:bg-segundo"),children:[(0,t.jsx)("img",{src:"/home-icon.png",alt:"Home",className:"h-6 w-6 mr-4"}),!g&&(0,t.jsx)("span",{className:"text-left font-bold text-white",children:"Home"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"p-4 flex items-center justify-between cursor-pointer ".concat((a="/dashboard/usuarios",v.pathname===a&&g)?"bg-[#00AAC1] text-white":"hover:bg-segundo"),onClick:()=>{g?w(!N):b(!x)},children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("img",{src:"/controle-icon.svg",alt:"Controle de Acesso",className:"h-6 w-6 mr-4"}),!g&&(0,t.jsx)("span",{className:"text-left font-bold text-white",children:"Controle de Acesso"})]}),(0,t.jsx)("img",{src:x?"/pra-baixo.svg":"/pra-cima.svg",alt:"Seta",className:"h-4 w-4 ml-2"})]}),N&&g&&(0,t.jsx)("div",{className:"absolute left-full top-0 bg-segundo rounded-lg shadow-lg w-48 p-4",children:(0,t.jsx)(l(),{href:"/dashboard/usuarios",className:"block font-bold p-2 ".concat((o="/dashboard/usuarios",v.pathname===o)?"bg-[#00AAC1] text-white":"hover:bg-terceiro rounded"),children:"Usu\xe1rios"})}),!g&&x&&(0,t.jsx)("div",{className:"pl-12",children:(0,t.jsxs)(l(),{href:"/dashboard/usuarios",className:"flex items-center p-4 ".concat((i="/dashboard/usuarios",v.pathname===i)?"bg-[#00AAC1] text-white":"hover:bg-segundo"),children:[(0,t.jsx)("img",{src:"/usuarios-icon.svg",alt:"Usu\xe1rios",className:"h-6 w-6 mr-4"}),(0,t.jsx)("span",{className:"text-left font-bold",children:"Usu\xe1rios"})]})})]})]})]}),(0,t.jsxs)("footer",{className:"p-4 text-left text-xs text-gray-400 ".concat(g?"text-center":""),children:[!g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"font-bold text-lg leading-10 text-white opacity-100 tracking-normal",children:"\xa9 WenLock"}),(0,t.jsx)("p",{className:"text-segundo",children:"Power by Conecthus"}),(0,t.jsx)("p",{className:"text-segundo",children:"V 0.0.0"})]}),g&&(0,t.jsx)("p",{className:"text-white",children:"V 0.0.0"})]})]}),(0,t.jsxs)("main",{className:"flex-1 bg-gray-100 relative",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center p-6 bg-white text-black",children:[(0,t.jsx)("div",{className:"text-2xl font-bold"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:()=>{j(!f)},className:"focus:outline-none",children:(0,t.jsxs)("div",{className:"bg-terceiro h-10 w-10 rounded-full flex items-center justify-center text-white font-bold",children:[d.split(" ").map(e=>e[0]).join("")," "]})}),f&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg p-2 z-10",children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)("div",{className:"bg-terceiro h-8 w-8 rounded-full flex items-center justify-center text-white font-bold",children:d.split(" ").map(e=>e[0]).join("")}),(0,t.jsxs)("div",{className:"ml-2",children:[(0,t.jsx)("p",{className:"font-bold text-xs text-quarto break-words",children:d}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 break-words",children:m})]})]}),(0,t.jsxs)("button",{onClick:()=>{localStorage.removeItem("userName"),localStorage.removeItem("userEmail"),localStorage.removeItem("token"),v.push("/login")},className:"flex items-center text-quarto font-bold hover:text-tertiary",children:[(0,t.jsx)("img",{src:"/logout.png",alt:"Sair",className:"h-4 w-4 mr-2"}),"Sair"]})]})]})]}),(0,t.jsx)("div",{children:c})]})]})}},6922:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return u}});var t=a(5893),r=a(7294),o=a(1163),l=a(1664),n=a.n(l),i=a(469),c=()=>{let e=(0,o.useRouter)(),{id:s}=e.query,a=Array.isArray(s)?s[0]:s,[l,c]=(0,r.useState)({nome:"",email:"",matricula:"",senha:"",repetirSenha:""}),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[g,p]=(0,r.useState)("");(0,r.useEffect)(()=>{a&&(async()=>{try{let e=await (0,i.Mi)(a);c({nome:e.name,email:e.email,matricula:e.registration_number,senha:"",repetirSenha:""})}catch(e){console.error("Erro ao carregar os dados do usu\xe1rio:",e),p("Erro ao carregar os dados do usu\xe1rio.")}})()},[a]),(0,r.useEffect)(()=>{let e;e=!0,l.nome&&l.email&&l.matricula||(e=!1),l.senha&&l.senha!==l.repetirSenha?(e=!1,p("As senhas n\xe3o coincidem.")):p(""),b(e)},[l.senha,l.repetirSenha,l.nome,l.email,l.matricula]);let f=e=>{let{name:s,value:a}=e.target;c({...l,[s]:a})},j=async()=>{if(x&&a)try{await (0,i.Nq)(a,{name:l.nome,email:l.email,registration_number:l.matricula,password:l.senha}),e.push("/dashboard/usuarios")}catch(e){e instanceof Error?p("Erro ao atualizar usu\xe1rio: "+e.message):p("Erro desconhecido ao atualizar usu\xe1rio.")}};return(0,t.jsxs)("div",{className:"min-h-screen p-6 bg-gray-100",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-500 mb-4",children:[(0,t.jsx)(n(),{href:"/dashboard/usuarios",legacyBehavior:!0,children:(0,t.jsx)("a",{className:"text-blue-600 hover:underline",children:"Usu\xe1rios"})})," > Editar Usu\xe1rio"]}),(0,t.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,t.jsx)("h1",{className:"text-3xl font-bold text-black",children:"Editar Usu\xe1rio"})}),g&&(0,t.jsx)("p",{className:"text-red-600 mb-4",children:g}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"text-lg font-bold mb-2",children:"Dados do Usu\xe1rio"}),(0,t.jsx)("hr",{className:"border-gray-400 mb-4"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-semibold",children:"Nome Completo *"}),(0,t.jsx)("input",{type:"text",name:"nome",value:l.nome,onChange:f,className:"border rounded-lg w-full px-4 py-2",placeholder:"Insira o nome completo",maxLength:30})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-semibold",children:"Matr\xedcula *"}),(0,t.jsx)("input",{type:"text",name:"matricula",value:l.matricula,onChange:f,className:"border rounded-lg w-full px-4 py-2",placeholder:"Insira o N\xba da matr\xedcula",maxLength:10})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block mb-1 font-semibold",children:"E-mail *"}),(0,t.jsx)("input",{type:"email",name:"email",value:l.email,onChange:f,className:"border rounded-lg w-full px-4 py-2",placeholder:"Insira o e-mail",maxLength:40})]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"text-lg font-bold mb-2",children:"Dados de Acesso"}),(0,t.jsx)("hr",{className:"border-gray-400 mb-4"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block mb-1 font-semibold",children:"Senha *"}),(0,t.jsx)("input",{type:d?"text":"password",name:"senha",value:l.senha,onChange:f,className:"border rounded-lg w-full px-4 py-2",placeholder:"Senha"}),(0,t.jsx)("button",{type:"button",className:"absolute right-3 top-10",onClick:()=>u(!d),children:d?"\uD83D\uDC41️":"\uD83D\uDC41️‍\uD83D\uDDE8️"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block mb-1 font-semibold",children:"Repetir Senha *"}),(0,t.jsx)("input",{type:m?"text":"password",name:"repetirSenha",value:l.repetirSenha,onChange:f,className:"border rounded-lg w-full px-4 py-2",placeholder:"Repita a senha"}),(0,t.jsx)("button",{type:"button",className:"absolute right-3 top-10",onClick:()=>h(!m),children:m?"\uD83D\uDC41️":"\uD83D\uDC41️‍\uD83D\uDDE8️"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,t.jsx)("button",{className:"bg-gray-200 text-black font-bold py-2 px-4 rounded",onClick:()=>e.push("/dashboard/usuarios"),children:"Cancelar"}),(0,t.jsx)("button",{className:"py-2 px-4 font-bold rounded ".concat(x?"bg-quarto text-white":"bg-gray-200 text-gray-500"),disabled:!x,onClick:j,children:"Salvar"})]})]})]})},d=a(6092),u=()=>(0,t.jsx)(d.Z,{children:(0,t.jsx)(c,{})})}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=6474)}),_N_E=e.O()}]);